<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../iron-ajax/iron-ajax.html">
<link rel="stylesheet" href="../github-markdown-css/github-markdown.css">

<dom-module id="github-readme">
  <template>
    <iron-ajax
      auto
      url="https://api.github.com/repos/[[repo]]/readme"
      headers='{"Accept": "application/vnd.github.VERSION.html"}'
      handle-as="text"
      on-response="handleResponse">
    </iron-ajax>

    <style>
      :host {
        display: block;
      }

      .markdown-body {
        box-sizing: border-box;
        max-width: 980px;
        min-width: 200px;
        padding: 45px;
        margin: 0 auto;
      }
    </style>

    <div id="readme" class="markdown-body"></div>
  </template>

  <script>
    Polymer({

      is: 'github-readme',

      properties: {
        repo: {
          type: String,
          value: 'customelements/github-readme',
        }
      },

      handleResponse: function(e) {
        this.$.readme.innerHTML = e.detail.response;
      }

    });
  </script>
</dom-module>
